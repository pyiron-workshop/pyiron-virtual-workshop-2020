image: continuumio/miniconda3:latest

before_script:
  - conda install -y -c conda-forge papermill pyiron nglview lammps sphinxdft=2.6.1=h6ced99e_5
  - printf "[DEFAULT]\nTOP_LEVEL_DIRS = ${HOME}\nRESOURCE_PATHS = ${HOME}/resources" > ${HOME}/.pyiron
  - git clone https://github.com/pyiron/pyiron-resources.git ${HOME}/resources

tests:
  stage: test
  script:
    - chmod +x .ci-support/build_notebooks.sh
    - ./.ci-support/build_notebooks.sh
